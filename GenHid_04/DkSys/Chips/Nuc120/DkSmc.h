#ifndef DK_SMC_H
#define DK_SMC_H

#include "DkSys.h"

#define GCR_BA		0x50000000
#define PDID		GCR_BA + 0x00
#define RSTSRC		GCR_BA + 0x04
#define IPRSTC1		GCR_BA + 0x08
#define IPRSTC2		GCR_BA + 0x0C
#define CPR			GCR_BA + 0x10
#define BODCR		GCR_BA + 0x18
#define TEMPCR		GCR_BA + 0x1C
#define PORCR		GCR_BA + 0x24
#define GPA_MFP		GCR_BA + 0x30
#define GPB_MFP		GCR_BA + 0x34
#define GPC_MFP		GCR_BA + 0x38
#define GPD_MFP		GCR_BA + 0x3C
#define GPE_MFP		GCR_BA + 0x40
#define ALT_MFP		GCR_BA + 0x50
#define REGWRPROT	GCR_BA + 0x100

#define SMC_GET_PART_DEV_ID()		IO_MMAP(PDID)

#define SMC_SYS_RST_CHIP			0x00000001
#define SMC_SYS_RST_CPU				0x00000002
#define SMC_SYS_RST_PDMA			0x00000004
#define SMC_SYS_RST_EBI				0x00000008

#define SMC_SYS_RESET(SysCtrl)		ENABLE_BITS(IPRSTC1, SET, SysCtrl)

#define SMC_CTRL_RST_GPIO			0x00000002
#define SMC_CTRL_RST_TMR0			0x00000004
#define SMC_CTRL_RST_TMR1			0x00000008
#define SMC_CTRL_RST_TMR2			0x00000010
#define SMC_CTRL_RST_TMR3			0x00000020
#define SMC_CTRL_RST_I2C0			0x00000100
#define SMC_CTRL_RST_I2C1			0x00000200
#define SMC_CTRL_RST_SPI0			0x00001000
#define SMC_CTRL_RST_SPI1			0x00002000
#define SMC_CTRL_RST_SPI2			0x00004000
#define SMC_CTRL_RST_SPI3			0x00008000
#define SMC_CTRL_RST_UART0			0x00010000
#define SMC_CTRL_RST_UART1			0x00020000
#define SMC_CTRL_RST_UART2			0x00040000
#define SMC_CTRL_RST_PWM03			0x00100000
#define SMC_CTRL_RST_PWM47			0x00200000
#define SMC_CTRL_RST_ACMP			0x00400000
#define SMC_CTRL_RST_PS2			0x00800000
#define SMC_CTRL_RST_USBD			0x08000000
#define SMC_CTRL_RST_ADC			0x10000000
#define SMC_CTRL_RST_I2S			0x20000000

#define SMC_RESET_CTRL(SmcCtrl, Set)		ENABLE_BITS(IPRSTC2, Set, SmcCtrl)

#define SMC_DISABLE_WRITE_PROTECT()				\
	IO_MMAP(REGWRPROT) = 0x59;					\
	IO_MMAP(REGWRPROT) = 0x16;					\
	IO_MMAP(REGWRPROT) = 0x88;					\
	while ((IO_MMAP(REGWRPROT) & 0x1) == 0)		\

#define SMC_ENABLE_WRITE_PROTECT()				\
	IO_MMAP(REGWRPROT) = 0xBF;					\
	while ((IO_MMAP(REGWRPROT) & 0x1) == 1)

#define SMC_ENABLE_INTL_TEMP_SENSOR(uEna)	ENABLE_BIT(TEMPCR, BIT_NO_0, uEna)

#endif  // End of DK_SMC_H
